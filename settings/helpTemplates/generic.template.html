<#macro argumentlist name myargs>
    <#if myargs?size != 0> 
        <tr><th colspan="4" align="left">${name}</th></tr>
        <#list myargs as arg>
            <tr>
                <td><a href="#${arg.name}">${arg.name}</a></td>
                <td><a href="#${arg.name}">${arg.synonyms}</a></td>
                <td>${arg.type}</td>
                <td>${arg.summary}</td>
            </tr>
            <#--
                <td>${arg.required}</td>
            -->
        </#list>
    </#if>
</#macro>    
   
<#macro argumentDetails arg>
    <h3><a name="${arg.name}">${arg.name} / ${arg.synonyms}</a></h3>
    Summary: ${arg.summary}<br>
    Attributes: ${arg.attributes}<br>
    Type: ${arg.type}<br> 
    Options: ${arg.options}<br> 
    Details: ${arg.fulltext}<br>
</#macro>     
   
<#macro relatedByType name type>
    <#list relatedDocs as relatedDoc>
        <#if relatedDoc.relation == type>
            <h3>${name}</h3>
            <ul>
            <#list relatedDocs as relatedDoc>
                <#if relatedDoc.relation == type>
                    <li><a href="${relatedDoc.filename}">${relatedDoc.name}</a> is a ${relatedDoc.relation}</li>
                </#if>
            </#list>
            </ul>
        <#break>        
        </#if>
    </#list>
</#macro>
   
   
<html>
<head>
  <title>${name} documentation</title>
</head>
<body>
  <h1>${name}<h1>
  <h2>Brief summary</h2>
  ${summary}
  <#if author??>
      <h2>Author</h2>
      ${author}
  </#if>
  <h2>Detailed description</h2>
  ${description}
  
  <#-- Create the argument summary -->
  <#if arguments.all?size != 0> 
      <hr>
      <h2>Feature specific arguments</h2>
      <table border="1" cellpadding="2">
      <tr>
         <th>Name</th>
         <th>Synonyms</th>
         <th>Type</th>
         <th>Summary</th>
      </tr>
         <@argumentlist name="Required" myargs=arguments.required/>
         <@argumentlist name="Optional" myargs=arguments.optional/>
         <@argumentlist name="Hidden" myargs=arguments.hidden/>
         <@argumentlist name="Depreciated" myargs=arguments.depreciated/>
      </table>
  </#if>

  <#-- Create references to additional capabilities if appropriate -->
  <#if extradocs?size != 0> 
      <hr>
      <h2>Additional capabilities</h2>
      The arguments described in the entries below can be supplied to this tool to modify
      its behavior.  For example, the -L argument directs the GATK engine restricts processing 
      to specific genomic intervals.  This capability is available to all GATK walkers.
      <ul>
      <#list extradocs as extradoc>
          <li><a href="${extradoc.filename}">${extradoc.name}</a></li>
      </#list>
      </ul>
  </#if>
  
  <#-- This class is related to other documented classes via sub/super relationships -->
  <#if relatedDocs?size != 0> 
    <h2>Related capabilities</h2>
    <@relatedByType name="Superclasses" type="superclass"/>
    <@relatedByType name="Subclasses" type="subclass"/>
    <hr>
  </#if>
    
  <#-- List all of the -->
  <#if arguments.all?size != 0> 
      <hr>
      <#-- Create the argument details -->
      <h2>Argument details</h2>
      <#list arguments.all as arg>
        <@argumentDetails arg=arg/>
      </#list>
  </#if>
</body>
</html>
